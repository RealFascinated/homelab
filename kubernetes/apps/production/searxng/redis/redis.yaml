---
apiVersion: v1
kind: Pod
metadata:
  name: searxng-redis
  namespace: public-services
spec:
  containers:
    - name: searxng-redis
      image: docker.io/valkey/valkey:8-alpine
      command: ["valkey-server", "--save", "30", "1", "--loglevel", "warning"]
      ports:
        - containerPort: 6379
      volumeMounts:
        - name: redis-data
          mountPath: /data
      resources:
        requests:
          memory: "64Mi"
          cpu: "50m"
        limits:
          memory: "256Mi"
          cpu: "500m"
  volumes:
    - name: redis-data
      persistentVolumeClaim:
        claimName: searxng-redis-pvc
